<script>
  (function(){
    const BASE = '/israelite-research';

    /* Your existing categories/data */
    const rows = [
      {
        title: 'The Law',
        sub: 'Torah — 5 books of Moses',
        books: [
          { abbr:'Gn', name:'Genesis',    date:'c. 15–13th c. BCE', href:`${BASE}/tanakh/book.html?book=Genesis` },
          { abbr:'Ex', name:'Exodus',     date:'c. 15–13th c. BCE', href:`${BASE}/tanakh/book.html?book=Exodus` },
          { abbr:'Lv', name:'Leviticus',  date:'c. 15–13th c. BCE', href:`${BASE}/tanakh/book.html?book=Leviticus` },
          { abbr:'Nm', name:'Numbers',    date:'c. 15–13th c. BCE', href:`${BASE}/tanakh/book.html?book=Numbers` },
          { abbr:'Dt', name:'Deuteronomy',date:'c. 15–13th c. BCE', href:`${BASE}/tanakh/book.html?book=Deuteronomy` },
        ]
      },
      {
        title: 'History',
        sub: 'God’s providence in Israel’s story',
        books: [
          { abbr:'Jo',  name:'Joshua',          date:'c. 13th–12th c. BCE', href:`${BASE}/tanakh/book.html?book=Joshua` },
          { abbr:'Jg',  name:'Judges',          date:'c. 12th–11th c. BCE', href:`${BASE}/tanakh/book.html?book=Judges` },
          { abbr:'Ru',  name:'Ruth',            date:'c. 11th–10th c. BCE', href:`${BASE}/tanakh/book.html?book=Ruth` },
          { abbr:'Sm',  name:'Samuel',          date:'c. 10th–9th c. BCE',  href:`${BASE}/tanakh/book.html?book=Samuel` },
          { abbr:'Kg',  name:'Kings',           date:'c. 9th–6th c. BCE',   href:`${BASE}/tanakh/book.html?book=Kings` },
          { abbr:'Ch',  name:'Chronicles',      date:'c. 5th–4th c. BCE',   href:`${BASE}/tanakh/book.html?book=Chronicles` },
          { abbr:'EzN', name:'Ezra–Nehemiah',   date:'c. 5th c. BCE',       href:`${BASE}/tanakh/book.html?book=Ezra-Nehemiah` },
          { abbr:'Est', name:'Esther',          date:'c. 5th–4th c. BCE',   href:`${BASE}/tanakh/book.html?book=Esther` },
        ]
      },
      {
        title: 'Wisdom',
        sub: 'Poetry | Wise writings',
        books: [
          { abbr:'Job', name:'Job',            date:'various, ancient',  href:`${BASE}/tanakh/book.html?book=Job` },
          { abbr:'Ps',  name:'Psalms',         date:'c. 10th–5th c. BCE',href:`${BASE}/tanakh/book.html?book=Psalms` },
          { abbr:'Pr',  name:'Proverbs',       date:'c. 10th–6th c. BCE',href:`${BASE}/tanakh/book.html?book=Proverbs` },
          { abbr:'Ec',  name:'Ecclesiastes',   date:'c. 10th–3rd c. BCE',href:`${BASE}/tanakh/book.html?book=Ecclesiastes` },
          { abbr:'SoS', name:'Song of Songs',  date:'c. 10th–3rd c. BCE',href:`${BASE}/tanakh/book.html?book=Song%20of%20Songs` },
        ]
      },
      {
        title: 'The Prophets',
        sub: 'Major & Minor Prophets',
        books: [
          { abbr:'Is',  name:'Isaiah',     date:'8th–7th c. BCE', href:`${BASE}/tanakh/book.html?book=Isaiah` },
          { abbr:'Jr',  name:'Jeremiah',   date:'7th–6th c. BCE', href:`${BASE}/tanakh/book.html?book=Jeremiah` },
          { abbr:'Ezk', name:'Ezekiel',    date:'6th c. BCE',     href:`${BASE}/tanakh/book.html?book=Ezekiel` },
          { abbr:'Dn',  name:'Daniel',     date:'6th–2nd c. BCE', href:`${BASE}/tanakh/book.html?book=Daniel` },
          { abbr:'Hs',  name:'Hosea',      date:'8th c. BCE',     href:`${BASE}/tanakh/book.html?book=Hosea` },
          { abbr:'Jl',  name:'Joel',       date:'9th–5th c. BCE', href:`${BASE}/tanakh/book.html?book=Joel` },
          { abbr:'Am',  name:'Amos',       date:'8th c. BCE',     href:`${BASE}/tanakh/book.html?book=Amos` },
          { abbr:'Ob',  name:'Obadiah',    date:'6th–5th c. BCE', href:`${BASE}/tanakh/book.html?book=Obadiah` },
          { abbr:'Jon', name:'Jonah',      date:'8th–4th c. BCE', href:`${BASE}/tanakh/book.html?book=Jonah` },
          { abbr:'Mi',  name:'Micah',      date:'8th c. BCE',     href:`${BASE}/tanakh/book.html?book=Micah` },
          { abbr:'Na',  name:'Nahum',      date:'7th c. BCE',     href:`${BASE}/tanakh/book.html?book=Nahum` },
          { abbr:'Hb',  name:'Habakkuk',   date:'7th c. BCE',     href:`${BASE}/tanakh/book.html?book=Habakkuk` },
          { abbr:'Zp',  name:'Zephaniah',  date:'7th c. BCE',     href:`${BASE}/tanakh/book.html?book=Zephaniah` },
          { abbr:'Hg',  name:'Haggai',     date:'6th c. BCE',     href:`${BASE}/tanakh/book.html?book=Haggai` },
          { abbr:'Zc',  name:'Zechariah',  date:'6th–5th c. BCE', href:`${BASE}/tanakh/book.html?book=Zechariah` },
          { abbr:'Ml',  name:'Malachi',    date:'5th c. BCE',     href:`${BASE}/tanakh/book.html?book=Malachi` },
        ]
      }
    ];

    /* NEW: Per-category column layout (omit to keep stacked) */
    const PILLAR_LAYOUT = {
      // Example: uncomment to give a 2-column grid for “The Law”
      // "The Law": 2,

      // You can set others too:
      // "History": 3,
      // "Wisdom": 2,
      // "The Prophets": 3,
    };

    const root = document.getElementById('tanakh-root');
    rows.forEach(({title, sub, books})=>{
      const row = document.createElement('section');
      row.className = 'canon-row';

      const left = document.createElement('div');
      left.className = 'canon-left';
      left.innerHTML = `<h2>${title}</h2><div class="sub">${sub}</div>`;

      const right = document.createElement('div');
      right.className = 'canon-right';

      const wrap = document.createElement('div');
      wrap.className = 'books';

      (books || []).forEach(b=>{
        const a = document.createElement('a');
        a.className = 'pt-card';
        a.href = b.href;
        a.innerHTML = `
          <div class="pt-date">${b.date || ''}</div>
          <div class="pt-abbr">${b.abbr || ''}</div>
          <div class="pt-name">${b.name || ''}</div>
        `;
        wrap.appendChild(a);
      });

      /* NEW: If this category has a column count, switch to grid for that pillar */
      const cols = PILLAR_LAYOUT[title];
      if (cols && Number(cols) > 0) {
        row.setAttribute('data-cols', String(cols));  // if you later want CSS hooks
        wrap.style.display = 'grid';
        wrap.style.gridTemplateColumns = `repeat(${Number(cols)}, minmax(140px, 1fr))`;
        wrap.style.gap = '12px';
      }
      /* Otherwise, it stays as your original flex-wrap stack */

      right.appendChild(wrap);
      row.append(left, right);
      root.appendChild(row);
    });
  })();
</script>
