<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Historical Textual Variants — Semitic Jew</title>
<link href="/israelite-research/styles.css" rel="stylesheet"/>
<style>
  .variants-page .container{max-width:1200px;margin:0 auto;padding:0 16px}
  .variants-page .page-header{padding:24px 0 8px}
  .variants-page .page-title{margin:0;font-size:2rem;font-weight:800}
  .variants-page .controls{display:grid;grid-template-columns:repeat(6,minmax(0,1fr));gap:.75rem;margin:16px 0 20px}
  .variants-page .controls .full{grid-column:1/-1}
  .variants-page select,.variants-page input[type="text"]{width:100%;padding:.6rem;border:1px solid #ddd;border-radius:8px}
  .variants-page .chipbar{display:flex;flex-wrap:wrap;gap:.5rem}
  .variants-page .chip{display:inline-flex;align-items:center;gap:.4rem;padding:.35rem .6rem;border-radius:999px;border:1px solid #ddd;background:#fff;cursor:pointer;font-size:.9rem}
  .variants-page .chip input{margin:0}
  .variants-page .results{overflow-x:auto;border:1px solid #eee;border-radius:12px}
  .variants-page table{width:100%;border-collapse:separate;border-spacing:0}
  .variants-page th,.variants-page td{padding:.8rem;vertical-align:top;border-bottom:1px solid #f0f0f0}
  .variants-page thead th{position:sticky;top:0;background:#fff;font-weight:700;border-bottom:2px solid #e5e7eb;white-space:nowrap}
  .variants-page tbody tr:hover{background:#fafafa}
  .variants-page .ref{font-weight:700}
  .variants-page .note{font-size:.85rem;margin-top:.25rem;opacity:.9}
  .variants-page .pill{display:inline-block;padding:.15rem .5rem;border-radius:999px;background:#eef2ff;font-size:.75rem;margin-right:.35rem}
  @media (max-width:900px){
    .variants-page .controls{grid-template-columns:repeat(2,minmax(0,1fr))}
  }
</style>
</head>

<body class="variants-page">

<!-- ===== Header (canonical) ===== -->
<div id="site-header">
  <!-- Universal Header Partial -->
  <header class="site-header-bar">
    <style>
      #site-header .site-header-bar{
        background: var(--surface, #ffffff);
        color: var(--ink, #0b2340);
        border-bottom: 1px solid var(--border, #e6ebf2);
      }
      #site-header .header-inner{
        max-width:1200px; margin:0 auto; padding:10px 16px;
        display:flex; align-items:center; justify-content:space-between; gap:12px;
      }
      #site-header .brand{
        display:inline-flex; align-items:center; gap:10px;
        text-decoration:none; color:var(--ink, #0b2340);
        font-weight:900; font-size:1.05rem;
      }
      #site-header .brand .mark{
        width:26px; height:26px; border-radius:7px;
        border:1px solid var(--border, #e6ebf2);
        display:inline-flex; align-items:center; justify-content:center;
        background:var(--surface, #ffffff); box-shadow:var(--shadow, 0 1px 2px rgba(0,0,0,.05));
      }
      #site-header nav.primary{
        display:flex; gap:8px; align-items:center; flex-wrap:wrap;
      }
      #site-header nav.primary a{
        text-decoration:none; color:var(--ink, #0b2340); opacity:.95;
        padding:8px 10px; border-radius:8px; border:1px solid transparent;
        transition:border-color .15s ease, box-shadow .15s ease;
      }
      #site-header nav.primary a:hover{
        border-color:var(--border, #e6ebf2);
        box-shadow:var(--shadow, 0 1px 2px rgba(0,0,0,.05));
      }
      #site-header .tools{
        display:flex; align-items:center; gap:10px;
      }
      #site-header .icon-btn{
        width:40px; height:40px; border-radius:999px;
        border:1px solid var(--border, #e6ebf2);
        background:var(--surface, #ffffff); color:var(--ink, #0b2340);
        display:inline-flex; align-items:center; justify-content:center;
        cursor:pointer; box-shadow:var(--shadow, 0 1px 2px rgba(0,0,0,.05));
        transition:transform .15s, box-shadow .15s, border-color .15s, background-color .15s;
      }
      #site-header .icon-btn:hover{
        transform:translateY(-1px);
        box-shadow:var(--shadow-hover, 0 10px 20px rgba(0,0,0,.12));
        border-color:#cdd8e6;
      }
    </style>

    <div class="header-inner">
      <a class="brand" href="/israelite-research/">
        <span class="mark" aria-hidden="true">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
            <circle cx="6" cy="7" r="1.5" fill="currentColor"/>
            <circle cx="12" cy="5" r="1.5" fill="currentColor"/>
            <circle cx="18" cy="7" r="1.5" fill="currentColor"/>
            <path d="M4 19l1.5-9 5 4 3-6 3 6 5-4L20 19H4z"
                  fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M4 19h16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </span>
        <span>Semitic&nbsp;Jew</span>
      </a>

      <nav class="primary" aria-label="Primary">
        <a href="/israelite-research/apologetics.html">Apologetics</a>
        <a href="/israelite-research/articles.html">Articles</a>
        <a href="/israelite-research/biblia.html">Biblia</a>
        <a href="/israelite-research/donate.html">Donations</a>
        <a href="/israelite-research/events.html">Events</a>
        <a href="/israelite-research/media.html">Media</a>
      </nav>

      <div class="tools">
        <a class="icon-btn" href="/israelite-research/search.html" aria-label="Search">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M21 21l-4.35-4.35m1.18-5.15a7 7 0 11-14 0 7 7 0 0114 0z"
                  fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </a>
      </div>
    </div>
  </header>
</div>

<!-- ===== Main Content ===== -->
<main>
  <div class="container">
    <div class="page-header">
      <h1 class="page-title">Historical Textual Variants</h1>
      <p class="page-subtitle">Side-by-side readings from major textual traditions with concise notes.</p>
    </div>

    <section class="controls">
      <div>
        <label for="bookSel">Book</label>
        <select id="bookSel"></select>
      </div>
      <div>
        <label for="chapSel">Chapter</label>
        <select id="chapSel"></select>
      </div>
      <div>
        <label for="verseSel">Verse</label>
        <select id="verseSel"></select>
      </div>
      <div class="full">
        <label for="searchBox">Search keywords</label>
        <input id="searchBox" type="text" placeholder="e.g., virgin, pierced, Egypt, ships"/>
      </div>
      <div class="full">
        <div class="chipbar" id="traditionsBar"></div>
      </div>
    </section>

    <section class="results">
      <table id="variantsTable">
        <thead>
          <tr>
            <th style="min-width:180px">Reference</th>
            <th>Masoretic Text (MT)</th>
            <th>Septuagint (LXX)</th>
            <th>Dead Sea Scrolls (DSS)</th>
            <th>Vulgate</th>
            <th>Peshitta</th>
          </tr>
        </thead>
        <tbody id="variantsBody"></tbody>
      </table>
    </section>
  </div>
</main>

<!-- ===== Footer (canonical) ===== -->
<div id="site-footer">
  <!-- Universal Footer Partial -->
  <footer class="site-footer">
  <style>
    #site-footer .site-footer{
      background: var(--surface, #ffffff);
      color: var(--ink, #0b2340);
      border-top: 1px solid var(--border, #e6ebf2);
    }
    #site-footer .footer-inner{
      max-width:1200px; margin:0 auto; padding:28px 16px 18px;
      display:grid; gap:28px;
      grid-template-columns: 1.2fr .8fr .8fr;
    }
    @media (max-width: 960px){
      #site-footer .footer-inner{ grid-template-columns: 1fr; }
    }

    /* Brand / tagline / socials / newsletter */
    #site-footer .footer-brand h3{
      margin:0 0 6px; font-size:1.15rem; font-weight:800; color:var(--ink, #0b2340);
      display:flex; align-items:center; gap:8px;
    }
    #site-footer .footer-brand .mark{
      width:26px; height:26px; border-radius:7px; border:1px solid var(--border, #e6ebf2);
      display:inline-flex; align-items:center; justify-content:center;
      background:var(--surface, #ffffff); box-shadow:var(--shadow, 0 1px 2px rgba(0,0,0,.05));
    }
    #site-footer .footer-tagline{
      margin:0 0 12px; color:var(--muted, #6b7280);
      max-width:46ch; text-align:left;
    }
    #site-footer .footer-social{ display:flex; gap:10px; margin:10px 0 14px; }
    #site-footer .footer-social .icon{
      width:40px; height:40px; border-radius:10px;
      border:1px solid var(--border, #e6ebf2);
      background:var(--surface, #ffffff); color:var(--ink, #0b2340);
      display:inline-flex; align-items:center; justify-content:center;
      text-decoration:none; box-shadow:var(--shadow, 0 1px 2px rgba(0,0,0,.05));
      transition:transform .15s, box-shadow .15s, border-color .15s, background-color .15s;
    }
    #site-footer .footer-social .icon:hover{
      transform:translateY(-1px);
      box-shadow:var(--shadow-hover, 0 10px 20px rgba(0,0,0,.12));
      border-color:#cdd8e6;
    }

    /* Newsletter */
    #site-footer .footer-newsletter .newsletter-row{
      display:flex; gap:8px; align-items:center;
    }
    #site-footer .footer-newsletter input[type="email"]{
      flex:1; padding:10px 12px; border:1px solid var(--border, #e6ebf2); border-radius:10px;
      background:var(--bg, #ffffff); color:var(--ink, #0b2340);
    }
    #site-footer .footer-newsletter input::placeholder{ color:var(--muted, #6b7280); }
    #site-footer .footer-newsletter button{
      padding:10px 12px; border-radius:10px; border:1px solid var(--border, #e6ebf2);
      background:var(--surface, #ffffff); color:var(--ink, #0b2340); cursor:pointer; box-shadow:var(--shadow, 0 1px 2px rgba(0,0,0,.05));
      transition:transform .15s, box-shadow .15s, border-color .15s;
    }
    #site-footer .footer-newsletter button:hover{
      transform:translateY(-1px);
      box-shadow:var(--shadow-hover, 0 10px 20px rgba(0,0,0,.12));
      border-color:#cdd8e6;
    }
    #site-footer .newsletter-note{ display:block; margin-top:6px; color:var(--muted, #6b7280); }

    /* Column headings + nav */
    #site-footer .footer-heading{
      margin:0 0 8px; font-size:.95rem; font-weight:800; letter-spacing:.06em;
      text-transform:uppercase; color:var(--ink, #0b2340);
    }
    #site-footer .footer-col--explore .footer-heading,
    #site-footer .footer-col--texts .footer-heading{
      font-style: normal; font-weight: 800; letter-spacing: .06em;
    }
    #site-footer .footer-nav{ list-style:none; padding:0; margin:0; display:grid; gap:6px; }
    #site-footer .footer-nav a{
      color:var(--ink, #0b2340); text-decoration:none; padding:6px 8px; border-radius:8px;
      border:1px solid transparent;
      transition:border-color .15s ease, background-color .15s ease;
    }
    #site-footer .footer-nav a:hover{
      border-color:var(--border, #e6ebf2);
      background:rgba(0,0,0,.02);
    }
/* Footer color tweaks */
#site-footer .footer-tagline { color: #F17300; }

#site-footer .newsletter-note {
  color: #F17300;
  text-align: left; /* ensure left aligned */
}

#site-footer .footer-bottom p {
  color: #F17300; /* © 2025 Semitic Jew. All rights reserved. */
}
    /* Bottom bar */
    #site-footer .footer-bottom{
      max-width:1200px; margin:0 auto; padding:10px 16px 24px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      color:var(--muted, #6b7280);
      border-top:1px solid var(--border, #e6ebf2);
    }
    @media (max-width: 720px){
      #site-footer .footer-bottom{ flex-direction:column; align-items:flex-start; gap:6px; }
    }
    #site-footer .legal-links{ display:flex; gap:12px; flex-wrap:wrap; }
    #site-footer .legal-links a{ color:var(--ink, #0b2340); text-decoration:none; opacity:.85; }
    #site-footer .legal-links a:hover{ opacity:1; }
  </style>

  <div class="footer-inner container">
    <!-- Left: Brand + description + socials + newsletter -->
    <div class="footer-col footer-brand">
      <h3 class="footer-heading footer-brandname">
        <span class="mark" aria-hidden="true">
          <!-- Crown icon -->
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
            <circle cx="6" cy="7" r="1.5" fill="currentColor"/>
            <circle cx="12" cy="5" r="1.5" fill="currentColor"/>
            <circle cx="18" cy="7" r="1.5" fill="currentColor"/>
            <path d="M4 19l1.5-9 5 4 3-6 3 6 5-4L20 19H4z"
                  fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M4 19h16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </span>
        <strong>Semitic Jew</strong>
      </h3>

      <p class="footer-tagline">Research-driven resources to help you read Scripture with logic, consistency, and context.</p>

      <div class="footer-social" aria-label="Social media">
        <!-- Instagram -->
        <a class="icon" href="https://www.instagram.com/semiticjew?igsh=OXl4czBhYWIydW1v&utm_source=qr" target="_blank" rel="noopener" aria-label="Instagram">
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
            <rect x="3" y="3" width="18" height="18" rx="5" ry="5" fill="none" stroke="currentColor" stroke-width="2"/>
            <circle cx="12" cy="12" r="4" fill="none" stroke="currentColor" stroke-width="2"/>
            <circle cx="17.5" cy="6.5" r="1" fill="currentColor"/>
          </svg>
        </a>
        <!-- X (Twitter) -->
        <a class="icon" href="https://x.com/semitic_jew?s=21" target="_blank" rel="noopener" aria-label="X">
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
            <path d="M4 4l16 16M20 4L4 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </a>
        <!-- Threads -->
        <a class="icon" href="https://www.threads.com/@semiticjew?invite=0" target="_blank" rel="noopener" aria-label="Threads">
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
            <path d="M12 3c5.5 0 9 3.1 9 9s-3.5 9-9 9-9-3.1-9-9 3.5-9 9-9zm3 8c-.2-1.5-1.3-2.5-3-2.5-2.1 0-3.5 1.3-3.5 3.3s1.3 3.3 3.4 3.3c1.5 0 2.6-.6 3-1.8l-1.2-.5c-.3.7-1 .9-1.8.9-1.3 0-2.1-.7-2.2-1.9h4.9c.1-.3.1-.7 0-1z"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </a>
        <!-- YouTube -->
        <a class="icon" href="https://www.youtube.com/@blksemitic" target="_blank" rel="noopener" aria-label="YouTube">
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
            <path d="M22 12s0-3-0.4-4.4c-.2-.8-.8-1.4-1.6-1.6C18.6 5.5 12 5.5 12 5.5s-6.6 0-8 0.5c-.8.2-1.4.8-1.6 1.6C2 9 2 12 2 12s0 3 0.4 4.4c.2.8.8 1.4 1.6 1.6 1.4.5 8 .5 8 .5s6.6 0 8-0.5c.8-.2 1.4-.8 1.6-1.6C22 15 22 12 22 12z" fill="none" stroke="currentColor" stroke-width="2"/>
            <path d="M10 9l5 3-5 3V9z" fill="currentColor"/>
          </svg>
        </a>
        <!-- Facebook -->
        <a class="icon" href="https://www.facebook.com/semiticjew" target="_blank" rel="noopener" aria-label="Facebook">
          <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
            <path d="M15 3h-2.2A3.8 3.8 0 009 6.8V9H7v4h2v8h4v-8h3l1-4h-4V7a1 1 0 011-1H16V3h-1z" fill="currentColor"/>
          </svg>
        </a>
      </div>

      <form class="footer-newsletter" action="https://formspree.io/f/your-id" method="POST" novalidate>
        <label for="nl-email" class="sr-only">Email address</label>
        <div class="newsletter-row">
          <input id="nl-email" name="email" type="email" placeholder="Your email" required>
          <button type="submit">Subscribe</button>
        </div>
        <small class="newsletter-note">Occasional updates. No spam. Unsubscribe any time.</small>
      </form>
    </div>

    <!-- Middle column: Resources -->
    <div class="footer-col footer-col--explore">
      <h4 class="footer-heading">Resources</h4>
      <ul class="footer-nav">
        <li><a href="/israelite-research/apologetics.html">Apologetics</a></li>
        <li><a href="/israelite-research/articles.html">Articles</a></li>
        <li><a href="/israelite-research/biblia.html">Biblia</a></li>
        <li><a href="/israelite-research/donate.html">Donations</a></li>
        <li><a href="/israelite-research/events.html">Events</a></li>
        <li><a href="/israelite-research/media.html">Media</a></li>
      </ul>
    </div>

    <!-- Right column: The Writings -->
    <div class="footer-col footer-col--texts">
      <h4 class="footer-heading">The Writings</h4>
      <ul class="footer-nav">
        <li><a href="/israelite-research/tanakh.html">Tanakh</a></li>
        <li><a href="/israelite-research/newtestament.html">New Testament</a></li>
        <li><a href="/israelite-research/biblical_references.html">Biblical References</a></li>
        <li><a href="/israelite-research/extra-biblical-sources.html">Extra-Biblical Sources</a></li>
        <li><a href="/israelite-research/historical_textual_variants.html">Historical &amp; Textual Variants</a></li>
      </ul>
    </div>
  </div>

  <div class="footer-bottom container">
    <p>&copy; 2025 Semitic Jew. All rights reserved.</p>
    <div class="legal-links">
      <a href="/israelite-research/terms.html">Terms</a>
      <a href="/israelite-research/privacy.html">Privacy</a>
      <a href="/israelite-research/contact.html">Contact</a>
    </div>
  </div>
</footer>
</div>

<script>
  const data = [
    {
      id:"isa-7-14",
      book:"Isaiah",
      chapter:7,
      verse:14,
      tags:["Christology","Prophecy"],
      MT:{text:"behold, the young woman shall conceive and bear a son, and shall call his name Immanuel"},
      LXX:{text:"behold, the virgin shall conceive in the womb and shall bear a son, and you shall call his name Emmanuel"},
      DSS:{text:"attested fragmentarily in 1QIsaa; wording aligns closely with MT in this clause"},
      Vulg:{text:"ecce virgo concipiet et pariet filium et vocabitur nomen eius Emmanuel"},
      Pesh:{text:"behold, the virgin shall conceive and bear a son, and she will call his name Immanuel"},
      note:"Key term: almah (MT) vs parthenos (LXX)."
    },
    {
      id:"psa-22-16",
      book:"Psalms",
      chapter:22,
      verse:16,
      tags:["Messianic","Poetry"],
      MT:{text:"like a lion, my hands and my feet"},
      LXX:{text:"they dug my hands and my feet"},
      DSS:{text:"4QPsaa preserves a reading consistent with 'they pierced' interpretation"},
      Vulg:{text:"foderunt manus meas et pedes meos"},
      Pesh:{text:"they pierced my hands and my feet"},
      note:"Variant focuses on ka’ari ('like a lion') vs 'they pierced/dug'."
    },
    {
      id:"deu-28-68",
      book:"Deuteronomy",
      chapter:28,
      verse:68,
      tags:["Covenant","Exile"],
      MT:{text:"YHWH will bring you back to Egypt in ships; you shall offer yourselves for sale to your enemies as male and female slaves, but no one will buy"},
      LXX:{text:"the Lord will bring you back to Egypt in ships; you will be sold to your enemies as slaves and handmaids, and there will be no one to rescue"},
      DSS:{text:"no extant manuscript for this verse; shown for completeness"},
      Vulg:{text:"reduces te Dominus in Ægyptum navibus... et non erit qui redimat"},
      Pesh:{text:"the Lord will make you return to Egypt by ships... and there will be none to buy/redeem"},
      note:"Differences around 'buy' vs 'redeem/rescue' and verbal aspect."
    }
  ];

  const traditions = [
    {key:"MT",label:"Masoretic Text"},
    {key:"LXX",label:"Septuagint"},
    {key:"DSS",label:"Dead Sea Scrolls"},
    {key:"Vulg",label:"Vulgate"},
    {key:"Pesh",label:"Peshitta"}
  ];

  const bookSel = document.getElementById("bookSel");
  const chapSel = document.getElementById("chapSel");
  const verseSel = document.getElementById("verseSel");
  const searchBox = document.getElementById("searchBox");
  const traditionsBar = document.getElementById("traditionsBar");
  const tbody = document.getElementById("variantsBody");

  const state = {
    book:"All",
    chapter:"All",
    verse:"All",
    search:"",
    visibleTrads:new Set(traditions.map(t=>t.key))
  };

  function unique(arr){return Array.from(new Set(arr))}
  function populateBooks(){
    const books=["All"].concat(unique(data.map(x=>x.book)));
    bookSel.innerHTML=books.map(b=>`<option value="${b}">${b}</option>`).join("");
    bookSel.value="All";
    populateChapters();
  }
  function populateChapters(){
    const filtered=state.book==="All"?data:data.filter(x=>x.book===state.book);
    const chapters=["All"].concat(unique(filtered.map(x=>String(x.chapter))).sort((a,b)=>+a-+b));
    chapSel.innerHTML=chapters.map(c=>`<option value="${c}">${c}</option>`).join("");
    chapSel.value="All";
    populateVerses();
  }
  function populateVerses(){
    let filtered=data;
    if(state.book!=="All") filtered=filtered.filter(x=>x.book===state.book);
    if(state.chapter!=="All") filtered=filtered.filter(x=>String(x.chapter)===String(state.chapter));
    const verses=["All"].concat(unique(filtered.map(x=>String(x.verse))).sort((a,b)=>+a-+b));
    verseSel.innerHTML=verses.map(v=>`<option value="${v}">${v}</option>`).join("");
    verseSel.value="All";
  }
  function renderTraditions(){
    traditionsBar.innerHTML=traditions.map(t=>{
      const checked=state.visibleTrads.has(t.key)?"checked":"";
      return `<label class="chip"><input type="checkbox" data-trad="${t.key}" ${checked}/> ${t.label}</label>`;
    }).join("");
    traditionsBar.querySelectorAll('input[type="checkbox"]').forEach(cb=>{
      cb.addEventListener("change",e=>{
        const k=e.target.getAttribute("data-trad");
        if(e.target.checked) state.visibleTrads.add(k); else state.visibleTrads.delete(k);
        renderTable();
      });
    });
  }
  function passesFilters(row){
    if(state.book!=="All" && row.book!==state.book) return false;
    if(state.chapter!=="All" && String(row.chapter)!==String(state.chapter)) return false;
    if(state.verse!=="All" && String(row.verse)!==String(state.verse)) return false;
    if(state.search){
      const q=state.search.toLowerCase();
      const hay=[row.book,row.chapter,row.verse,row.note]
        .concat(traditions.map(t=>row[t.key]?.text||""))
        .join(" ")
        .toLowerCase();
      if(!hay.includes(q)) return false;
    }
    return true;
  }
  function renderTable(){
    const filtered=data.filter(passesFilters);
    tbody.innerHTML=filtered.map(r=>{
      const ref=`${r.book} ${r.chapter}:${r.verse}`;
      function cell(k){
        if(!state.visibleTrads.has(k)) return `<td style="display:none"></td>`;
        const val=r[k]?.text?`${r[k].text}`:"—";
        return `<td><div>${val}</div></td>`;
      }
      const tags=r.tags?.map(t=>`<span class="pill">${t}</span>`).join("")||"";
      return `
        <tr>
          <td>
            <div class="ref">${ref}</div>
            <div class="note">${r.note||""}</div>
            <div class="tags">${tags}</div>
          </td>
          ${cell("MT")}
          ${cell("LXX")}
          ${cell("DSS")}
          ${cell("Vulg")}
          ${cell("Pesh")}
        </tr>
      `;
    }).join("");

    const ths=document.querySelectorAll("#variantsTable thead th");
    const order=["MT","LXX","DSS","Vulg","Pesh"];
    order.forEach((k,i)=>{
      const show=state.visibleTrads.has(k);
      ths[i+1].style.display=show?"table-cell":"none";
      document.querySelectorAll("#variantsTable tbody tr").forEach(tr=>{
        const td=tr.children[i+1];
        if(td) td.style.display=show?"table-cell":"none";
      });
    });
  }

  bookSel.addEventListener("change",e=>{state.book=e.target.value;populateChapters();renderTable();});
  chapSel.addEventListener("change",e=>{state.chapter=e.target.value;populateVerses();renderTable();});
  verseSel.addEventListener("change",e=>{state.verse=e.target.value;renderTable();});
  searchBox.addEventListener("input",e=>{state.search=e.target.value.trim();renderTable();});

  populateBooks();
  renderTraditions();
  renderTable();
</script>
</body>
</html>
