<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Extra-Biblical Sources — SVG Map</title>
<link rel="stylesheet" href="/israelite-research/styles.css"/>

<style>
  :root{--ink:#0b2340;--accent:#F17300;--brand:#054A91;--muted:#6b7280;--sky:#DBE4EE;--white:#fff}
  .container{max-width:1200px;margin:0 auto;padding:0 16px}
  .page-header{padding:28px 0 16px}
  .page-title{margin:0;font-size:2.1rem;font-weight:800}
  .crumbs{color:var(--muted);font-size:.95rem;margin-top:4px}

  /* Hero */
  .hero{background:linear-gradient(135deg,#f8fafc 0%,#ffffff 100%);border:1px solid var(--sky);border-radius:14px;padding:16px}
  .hero h2{margin:.2rem 0;font-size:1.35rem;color:var(--brand)}
  .hero p{margin:0;color:#475569}

  /* Layout: map + context */
  .map-wrap{display:grid;grid-template-columns:1fr 360px;gap:14px;margin:18px 0}
  @media (max-width: 960px){ .map-wrap{grid-template-columns:1fr} }

  /* SVG map panel */
  .panel{background:var(--white);border:1px solid var(--sky);border-radius:12px;padding:12px}
  .panel h3{margin:.2rem 0 .6rem;font-size:1.1rem;color:var(--brand)}
  .svg-frame{width:100%;height:auto;border:1px solid var(--sky);border-radius:12px;overflow:hidden;background:#fff}

  /* Regions */
  svg .region{fill:#DBE4EE; stroke:#054A91; stroke-width:1.2; cursor:pointer; transition:fill .15s, stroke .15s}
  svg .region:hover{fill:#cdd9e6}
  svg .region.selected{fill:#F17300; stroke:#F17300}

  /* Context panel */
  #context-panel{background:#fff;border:1px solid var(--sky);border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,.05)}
  #context-panel header{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid #eef2f7}
  #context-panel h3{margin:0;font-size:1rem;color:var(--brand);font-weight:800}
  #ctx-close{border:1px solid #e6ebf2;border-radius:999px;background:#fff;cursor:pointer;width:28px;height:28px;line-height:26px;text-align:center;font-size:.9rem;color:#334155}
  #ctx-close:hover{background:#f8fafc}
  #ctx-body{padding:12px}
  #ctx-body .subtle{color:#0b2340;font-weight:700;margin:.6rem 0 .25rem}
  #ctx-body .muted{color:#6b7280}
  #ctx-body ul{margin:.25rem 0 .75rem;padding-left:1.1rem}
  #ctx-body li{margin:.15rem 0}

  /* Tooltip (shared hovercard) */
  .hovercard{position:fixed;pointer-events:none;z-index:9999;max-width:320px;background:#fff;border:1px solid #e6ebf2;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.08);padding:10px 12px;display:none}
  .hovercard h5{margin:0 0 .25rem;font-size:1rem;color:#0b2340}
  .hovercard .muted{color:#6b7280;font-size:.88rem}
  .svg-frame svg{display:block;width:100%;height:auto;min-height:300px}
</style>
</head>
<body>
<div id="site-header"></div>

<main class="container">
  <header class="page-header">
    <h1 class="page-title">Extra-Biblical Sources</h1>
    <div class="crumbs">Research → Extra-Biblical Sources</div>
  </header>

  <section class="hero">
    <h2>Israelite Regions — Interactive SVG Map</h2>
    <p>Click a region to explore linked records from your datasets (Patriarchs, Judges, Captivities, Scattering, Books). All data is driven by your JSONs via <code>region_ids</code>.</p>
  </section>

  <section class="map-wrap">
    <section class="panel">
      <h3>Map</h3>
      <div class="svg-frame">
        <!-- Responsive viewBox, simple stylized regions (approximate polygons). Replace paths as you refine. -->
        <svg id="isr-svg" viewBox="0 0 1200 700" role="img" aria-label="Clickable map of Israelite-related regions">
          <!-- Water/background (optional subtle) -->
          <rect x="0" y="0" width="1000" height="560" fill="#eaf2fb"></rect>

          <!-- Regions with IDs that match your JSON region_ids -->
          <!-- EGYPT -->
          <path id="EGYPT" class="region" d="M170,330 L360,330 L360,470 L170,470 Z" />
          <!-- SINAI -->
          <path id="SINAI" class="region" d="M360,360 L420,360 L420,430 L360,430 Z" />
          <!-- CANAAN -->
          <path id="CANAAN" class="region" d="M440,260 L500,260 L500,360 L440,360 Z" />
          <!-- ASSYRIA -->
          <path id="ASSYRIA" class="region" d="M640,170 L760,170 L760,250 L640,250 Z" />
          <!-- BABYLON -->
          <path id="BABYLON" class="region" d="M620,260 L720,260 L720,340 L620,340 Z" />
          <!-- ARABIA -->
          <path id="ARABIA" class="region" d="M520,360 L690,360 L690,500 L520,500 Z" />
          <!-- ROME (peninsula placeholder) -->
          <path id="ROME" class="region" d="M150,160 L230,160 L230,260 L150,260 Z" />
          <!-- HARAN (small area) -->
          <path id="HARAN" class="region" d="M560,220 L600,220 L600,250 L560,250 Z" />
          <!-- UR (small area) -->
          <path id="UR" class="region" d="M680,340 L710,340 L710,370 L680,370 Z" />
        </svg>
      </div>
    </section>

    <aside id="context-panel" aria-live="polite">
      <header>
        <h3 id="ctx-title">Map Context</h3>
        <button id="ctx-close" type="button" aria-label="Close context">✕</button>
      </header>
      <div id="ctx-body">
        <p class="muted">Click a region to see linked records from your datasets.</p>
      </div>
    </aside>
  </section>
</main>

<div id="site-footer"></div>
<div id="hovercard" class="hovercard" role="dialog" aria-hidden="true"></div>

<!-- Base site scripts -->
<script src="/israelite-research/js/shims.js" defer></script>
<script src="/israelite-research/js/include.js" defer></script>
<script src="/israelite-research/js/xref-hover.js" defer></script>

<!-- SVG Map logic -->
<script src="js/svg-land.js" defer></script>
<script src="js/svg-map.js" defer></script>
</body>
</html>
