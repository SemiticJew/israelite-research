<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Extra-Biblical Sources — Interactive Map</title>
<link rel="stylesheet" href="/israelite-research/styles.css"/>

<!-- Leaflet (for Option B map) -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  crossorigin=""
/>

<style>
/* Context panel */
#context-panel{
  position: relative;
  margin-top: 12px;
  background:#fff;
  border:1px solid var(--sky);
  border-radius:12px;
  box-shadow:0 6px 18px rgba(0,0,0,.05);
}
#context-panel header{
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 12px; border-bottom:1px solid #eef2f7;
}
#context-panel h3{margin:0; font-size:1rem; color:var(--brand); font-weight:800}
#context-panel #ctx-close{
  border:1px solid #e6ebf2; border-radius:999px; background:#fff; cursor:pointer;
  width:28px; height:28px; line-height:26px; text-align:center; font-size:.9rem; color:#334155;
}
#context-panel #ctx-close:hover{background:#f8fafc}
#context-panel #ctx-body{padding:12px}
#context-panel .subtle{color:#0b2340; font-weight:700; margin:.6rem 0 .25rem}
#context-panel .muted{color:#6b7280}
#context-panel ul{margin:.25rem 0 .75rem; padding-left:1.1rem}
#context-panel li{margin:.15rem 0}

  :root{
    --ink:#0b2340; --accent:#F17300; --brand:#054A91;
    --muted:#6b7280; --sky:#DBE4EE; --white:#fff
  }
  .container{max-width:1200px;margin:0 auto;padding:0 16px}
  .page-header{padding:28px 0 16px}
  .page-title{margin:0;font-size:2.1rem;font-weight:800}
  .crumbs{color:var(--muted);font-size:.95rem;margin-top:4px}

  /* Hero */
  .hero{
    background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
    border:1px solid var(--sky); border-radius:14px; padding:16px;
    display:flex; flex-direction:column; gap:.25rem
  }
  .hero h2{margin:.2rem 0; font-size:1.35rem; color:var(--brand)}
  .hero p{margin:0; color:#475569}

  /* Panels */
  .panel{background:var(--white);border:1px solid var(--sky);border-radius:12px;padding:14px;margin:18px 0}
  .panel h3{margin:.2rem 0 .6rem;font-size:1.1rem;color:var(--brand)}

  /* Map */
  #isr-map{
    width:100%; height:560px;
    border:1px solid var(--sky); border-radius:12px; overflow:hidden
  }
  .leaf-legend input{vertical-align:middle}

  /* Optional: author modal visibility fix retained from earlier pages */
  #author-modal.modal-overlay{display:none!important;opacity:0;visibility:hidden}
  #author-modal.modal-overlay.open{display:flex!important;opacity:1;visibility:visible}
</style>
</head>
<body>
<div id="site-header"></div>

<main class="container">
  <header class="page-header">
    <h1 class="page-title">Extra-Biblical Sources</h1>
    <div class="crumbs">Research → Extra-Biblical Sources</div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <h2>Israelite Regions — Interactive Map</h2>
    <p>Explore core regions tied to Israelites’ sojourns and historical periods. Click a region to see linked entries from your datasets (Patriarchs, Captivities, Scattering, Books).</p>
  </section>

  <!-- Map only (no timelines on this page) -->
  <section class="panel">
    <h3>Map</h3>
    <div id="isr-map" role="region" aria-label="Interactive map of Israelite regions"></div>
<!-- Context panel (dynamic) -->
<aside id="context-panel" aria-live="polite">
  <header>
    <h3 id="ctx-title">Map Context</h3>
    <button id="ctx-close" type="button" aria-label="Close context">✕</button>
  </header>
  <div id="ctx-body">
    <p class="muted">Select an era or click a region to see details.</p>
  </div>
</aside>

  </section>
</main>

<div id="site-footer"></div>

<!-- Base site scripts -->
<script src="/israelite-research/js/shims.js" defer></script>
<script src="/israelite-research/js/include.js" defer></script>
<script src="/israelite-research/js/xref-hover.js" defer></script>

<!-- Leaflet JS -->
<script
  src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  crossorigin=""
  defer
></script>

<!-- Map logic (loads regions GeoJSON and links to your JSON datasets) -->
<script src="/israelite-research/js/map.js" defer></script>
</body>
</html>
