<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Events — Semitic Jew</title>

  <link rel="stylesheet" href="/israelite-research/styles.css" />
  <style>
    :root{ --accent:#F17300; }
    .events-page .container{ max-width:1200px; margin:0 auto; padding:0 16px; }

    /* Title */
    .events-page .page-header{ padding:24px 0 8px; }
    .events-page .page-title{ margin:0; font-size:2rem; font-weight:800; }

    /* Calendar wrapper */
    .calendar-wrap{ max-width:1000px; margin:0 auto 40px; }
    /* Ensure calendar area is visible */
    #calendar-app{ min-height:400px; display:block; }

    /* Optional: keep your existing calendar look if CSS was scoped earlier */
    .cal-toolbar{display:flex;align-items:center;justify-content:space-between;gap:.75rem;margin:1rem 0 1.25rem;}
    .cal-title{font-size:1.5rem;margin:0;}
    .cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
    .cal-dow{text-align:center;font-weight:600;color:#555;padding:.4rem 0}
    .cal-cell{min-height:92px;border:1px solid #e6ebf2;background:#fff;padding:.5rem;display:flex;flex-direction:column}
    .cal-date{font-size:.9rem;color:#333;margin-bottom:.35rem}
    .evt-chip{font-size:.82rem;line-height:1.2;background:#054A910D;border:1px solid #e6ebf2;padding:.25rem .35rem;margin:.15rem 0;cursor:pointer}
  </style>
</head>
<body class="events-page">
  <!-- Header partial -->
  <div id="site-header"></div>

  <main>
    <!-- Simple page title -->
    <header class="page-header">
      <div class="container">
        <h1 class="page-title">Events</h1>
      </div>
    </header>

    <!-- Calendar -->
    <div class="calendar-wrap">
      <!-- MOUNT POINT (do not remove) -->
      <div id="calendar-app" data-source="/israelite-research/data/events.json"></div>
      <!-- If you render server-side HTML for the calendar, place it INSIDE #calendar-app instead. -->
    </div>
  </main>

  <!-- Footer partial -->
  <div id="site-footer"></div>

  <!-- Include partials -->
  <script src="/israelite-research/js/include.js" defer></script>

  <!-- Include your calendar scripts (adjust paths to match your repo) -->
  <script src="/israelite-research/js/calendar.lib.js" defer></script>
  <script src="/israelite-research/js/calendar.js" defer></script>

  <!-- Bootstrap: try to mount if a global Calendar API exists -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var mount = document.getElementById('calendar-app');
      if (!mount) return;
      // If your app exposes Calendar.mount(el, dataSource)
      if (window.Calendar && typeof window.Calendar.mount === 'function') {
        var src = mount.getAttribute('data-source');
        try { window.Calendar.mount(mount, src); } catch (e) { console.error(e); }
      } else {
        // Graceful fallback if script didn’t load / API name changed
        if (!mount.querySelector('.cal-grid')) {
          mount.innerHTML =
            '<div style="padding:12px;border:1px dashed #e6ebf2;background:#fff;">' +
            'Calendar script not found. Ensure <code>/js/calendar.lib.js</code> and <code>/js/calendar.js</code> are included and expose <code>window.Calendar.mount(el, dataSource)</code>.' +
            '</div>';
        }
      }
    });
  </script>
</body>
</html>
