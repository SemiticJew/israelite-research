<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Events — Semitic Jew</title>
  <link rel="stylesheet" href="/israelite-research/styles.css" />
  <style>
    /* ===== Scoped calendar styles (won't leak) ===== */
    .events-page .calendar-wrap{max-width:1000px;margin:0 auto;}
    .events-page .cal-toolbar{display:flex;align-items:center;justify-content:space-between;gap:.75rem;margin:1rem 0 1.25rem;}
    .events-page .cal-title{font-family:var(--ff-serif,serif);font-size:1.5rem;margin:0;}
    .events-page .cal-nav{display:flex;gap:.5rem;}
    .events-page .btn{padding:.45rem .7rem;border:1px solid #e6ebf2;background:#fff;border-radius:10px;cursor:pointer}
    .events-page .btn:hover{background:#f8fafc}
    .events-page .cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
    .events-page .cal-dow{text-align:center;font-weight:600;color:#555;padding:.4rem 0}
    .events-page .cal-cell{min-height:92px;border:1px solid #e6ebf2;border-radius:10px;background:#fff;padding:.5rem;display:flex;flex-direction:column}
    .events-page .cal-cell.is-today{outline:2px solid var(--accent,#F17300)}
    .events-page .cal-date{font-size:.9rem;color:#333;margin-bottom:.35rem}
    .events-page .evt-chip{font-size:.82rem;line-height:1.2;background:#054A910D;border:1px solid #e6ebf2;border-radius:8px;padding:.25rem .35rem;margin:.15rem 0;cursor:pointer}
    .events-page .cal-empty{opacity:.4}
    .events-page .cal-legend{display:flex;gap:.5rem;align-items:center;margin:.75rem 0 0;color:#666;font-size:.9rem}
    .events-page .dot{width:10px;height:10px;border-radius:50%;background:#054A91;display:inline-block}

    /* Modal */
    .events-page .modal{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:center;justify-content:center;padding:1rem;z-index:9999}
    .events-page .modal.open{display:flex}
    .events-page .modal-card{width:min(560px,92vw);background:#fff;border-radius:14px;border:1px solid #e6ebf2;box-shadow:0 8px 30px rgba(0,0,0,.12)}
    .events-page .modal-head{display:flex;align-items:center;justify-content:space-between;padding:1rem 1rem .5rem 1rem;border-bottom:1px solid #eef2f7}
    .events-page .modal-title{font-family:var(--ff-serif,serif);font-size:1.25rem;margin:0}
    .events-page .modal-body{padding:1rem}
    .events-page .form-row{display:grid;grid-template-columns:1fr 1fr;gap:.75rem}
    .events-page label{font-size:.9rem;color:#333;margin:.35rem 0 .25rem;display:block}
    .events-page input[type="text"],
    .events-page input[type="date"],
    .events-page input[type="time"],
    .events-page textarea{
      width:100%;border:1px solid #e6ebf2;border-radius:10px;padding:.55rem .65rem;font:inherit
    }
    .events-page textarea{min-height:90px;resize:vertical}
    .events-page .modal-foot{display:flex;justify-content:space-between;gap:.5rem;padding:0 1rem 1rem}
    .events-page .btn-primary{background:var(--accent,#F17300);color:#fff;border-color:transparent}
    .events-page .btn-danger{border-color:#ffd8d8;background:#fff;color:#b42318}
    .events-page .btn-ghost{background:transparent}
    .events-page .sr-only{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px)}
  </style>
</head>
<body class="events-page">
  <!-- Header partial -->
  <div id="site-header"></div>

  <main>
    <!-- Hero (universal) -->
    <section class="page-hero hero-events">
      <div class="container">
        <h1 class="page-title">Events</h1>
        <p class="page-subtitle">Add, edit, and track gatherings, studies, and meetups.</p>
      </div>
      <div class="hero-divider"></div>
    </section>

    <!-- Breadcrumbs UNDER hero (consistent site-wide) -->
    <nav id="breadcrumbs" class="breadcrumb" aria-label="Breadcrumb" data-scope="events"></nav>

    <!-- Calendar -->
    <section class="container calendar-wrap" aria-label="Interactive calendar">
      <div class="cal-toolbar">
        <div class="cal-nav">
          <button class="btn" id="prevMonth" aria-label="Previous month">⟨</button>
          <button class="btn" id="todayBtn">Today</button>
          <button class="btn" id="nextMonth" aria-label="Next month">⟩</button>
        </div>
        <h2 class="cal-title" id="calTitle" aria-live="polite">Loading…</h2>
        <button class="btn btn-primary" id="addEventBtn">+ New Event</button>
      </div>

      <!-- Day names -->
      <div class="cal-grid" role="grid" aria-labelledby="calTitle">
        <div class="cal-dow" role="columnheader" aria-label="Sunday">Sun</div>
        <div class="cal-dow" role="columnheader" aria-label="Monday">Mon</div>
        <div class="cal-dow" role="columnheader" aria-label="Tuesday">Tue</div>
        <div class="cal-dow" role="columnheader" aria-label="Wednesday">Wed</div>
        <div class="cal-dow" role="columnheader" aria-label="Thursday">Thu</div>
        <div class="cal-dow" role="columnheader" aria-label="Friday">Fri</div>
        <div class="cal-dow" role="columnheader" aria-label="Saturday">Sat</div>
        <!-- JS injects the date cells here -->
      </div>

      <div class="cal-legend">
        <span class="dot" aria-hidden="true"></span>
        <span>Click a day to add or edit events. Your events are saved in your browser.</span>
      </div>
    </section>
  </main>

  <!-- Footer partial -->
  <div id="site-footer"></div>

  <!-- Partials + Breadcrumbs + Calendar logic -->
  <script src="/israelite-research/js/include.js"></script>
  <script src="/israelite-research/js/breadcrumbs.js" defer></script>
  <script src="/israelite-research/js/events.js" defer></script>

  <!-- Modal (kept here so JS can toggle) -->
  <div class="modal" id="eventModal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="eventModalTitle">
    <div class="modal-card">
      <div class="modal-head">
        <h3 class="modal-title" id="eventModalTitle">Add Event</h3>
        <button class="btn btn-ghost" id="closeModal" aria-label="Close">✕</button>
      </div>
      <form id="eventForm">
        <div class="modal-body">
          <input type="hidden" id="eventId" />
          <div class="form-row">
            <div>
              <label for="eventTitle">Title</label>
              <input type="text" id="eventTitle" placeholder="e.g., Wednesday Bible Study" required />
            </div>
            <div>
              <label for="eventDate">Date</label>
              <input type="date" id="eventDate" required />
            </div>
          </div>
          <div class="form-row">
            <div>
              <label for="eventTime">Time</label>
              <input type="time" id="eventTime" />
            </div>
            <div>
              <label for="eventLocation">Location</label>
              <input type="text" id="eventLocation" placeholder="Online / Room 204 / Address" />
            </div>
          </div>
          <label for="eventDesc">Notes</label>
          <textarea id="eventDesc" placeholder="Study passage, speaker, Zoom link, etc."></textarea>
        </div>
        <div class="modal-foot">
          <button type="button" class="btn btn-danger" id="deleteEvent" aria-label="Delete event">Delete</button>
          <div>
            <button type="button" class="btn" id="cancelEvent">Cancel</button>
            <button type="submit" class="btn btn-primary">Save Event</button>
          </div>
        </div>
      </form>
      <p class="sr-only" id="modalHint">Press Escape to close the dialog.</p>
    </div>
  </div>
</body>
</html>
