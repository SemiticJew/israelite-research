<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Chapter — Reader</title>
<link rel="stylesheet" href="/israelite-research/styles.css"/>
<style>
  :root{
    --ink:#0b2340; --muted:#6b7280; --accent:#F17300; --border:#e6ebf2; --card:#fff; --sky:#DBE4EE;
  }
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--ink);margin:0}
  .container{max-width:1200px;margin:0 auto;padding:0 16px}
  header.reader-head{padding:16px 0 8px;border-bottom:1px solid var(--border);display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  #textHead{font-size:1.25rem;font-weight:800;margin-right:auto}
  .nav-controls{display:flex;gap:8px;align-items:center}
  .nav-controls button,.toolbar button{
    padding:8px 12px;border:1px solid var(--border);background:var(--card);border-radius:10px;cursor:pointer
  }
  main{display:grid;grid-template-columns:1fr 320px;gap:20px;padding:16px 0}
  @media (max-width: 980px){ main{grid-template-columns:1fr} }
  /* Verse enclosure spacing */
  #verses{display:flex;flex-direction:column;gap:10px}
  .verse{
    border:1px solid var(--border);
    background:var(--card);
    border-radius:12px;
    padding:10px 12px;
  }
  .vline{display:grid;grid-template-columns:auto 1fr;gap:10px;align-items:start}
  .vnum{font-weight:700;color:var(--accent);min-width:2ch}
  .vtext{line-height:1.55}
  .v-toolbar{margin-top:6px;display:flex;gap:8px}
  /* Panels (Cross-Refs / Commentary / Lexicon) */
  .panels{display:flex;flex-direction:column;gap:12px}
  .panel{border:1px solid var(--border);border-radius:12px;background:var(--card)}
  .panel header{padding:10px 12px;border-bottom:1px solid var(--border);font-weight:700}
  .panel .body{padding:12px}
  /* Dictionary search (wired by nt-chapter.js) */
  #dictSearch{width:100%;padding:10px;border:1px solid var(--border);border-radius:10px}
  .muted{color:var(--muted)}
</style>
</head>
<body>
  <div class="container">
    <header class="reader-head">
      <div id="textHead">Loading…</div>
      <div class="nav-controls">
        <button id="btnPrev" type="button" aria-label="Previous Chapter">◀</button>
        <!-- ✨ Added per your request: book selector next to the chapter picker -->
        <select id="bookSelect" aria-label="Book Picker"></select>
        <select id="chSelect" aria-label="Chapter Picker"></select>
        <button id="btnNext" type="button" aria-label="Next Chapter">▶</button>
      </div>
      <div class="toolbar">
        <button type="button" data-panel="xrefs">Cross References</button>
        <button type="button" data-panel="comm">Commentary</button>
        <button type="button" data-panel="lex">Lexicon</button>
      </div>
    </header>

    <main>
      <!-- LEFT: verses -->
      <section id="textCol">
        <div id="verses"><p class="muted">Preparing verses…</p></div>
      </section>

      <!-- RIGHT: panels -->
      <aside class="panels">
        <section id="panel-xrefs" class="panel" hidden>
          <header>Cross References</header>
          <div class="body"><p class="muted">Select a verse to view cross references.</p></div>
        </section>

        <section id="panel-comm" class="panel" hidden>
          <header>Commentary</header>
          <div class="body"><p class="muted">Click a verse to add personal commentary.</p></div>
        </section>

        <section id="panel-lex" class="panel" hidden>
          <header>Lexicon</header>
          <div class="body">
            <input id="dictSearch" type="search" placeholder="Search dictionary (Easton)…"/>
            <div id="dictPanel" style="margin-top:10px"><p class="muted">Type a term to search…</p></div>
          </div>
        </section>
      </aside>
    </main>
  </div>

  <script>
    // Simple panel toggles; keeps only one open for focus
    (function(){
      const map = {
        xrefs: document.getElementById('panel-xrefs'),
        comm : document.getElementById('panel-comm'),
        lex  : document.getElementById('panel-lex')
      };
      document.addEventListener('click', (e)=>{
        const btn = e.target.closest('button[data-panel]');
        if(!btn) return;
        const key = btn.getAttribute('data-panel');
        Object.entries(map).forEach(([k,el])=>{
          if(!el) return;
          el.hidden = (k!==key) ? true : !el.hidden; // toggle selected, hide others
        });
      });
    })();
  </script>
  <script src="/israelite-research/js/nt-chapter.js" defer></script>
</body>
</html>
