<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<title>Morning to Morning — Devotionals</title>
<link href="/israelite-research/styles.css" rel="stylesheet"/>
<style>
  :root{
    --accent:#F17300; --ink:#0b2340; --muted:#6b7280; --sky:#e7ecf4; --brand:#054A91;
  }
  .container{ max-width:1200px; margin:0 auto; padding:0 16px; }

  .hero{ padding:28px 0 14px; border-bottom:1px solid var(--sky); }
  .hero-title{ margin:0; font-size:2rem; font-weight:900; color:var(--ink); }
  .hero-sub{ margin:.35rem 0 0; color:var(--muted); }

  .tabs{ display:flex; gap:10px; padding:14px 0; }
  .tab{
    display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border:1px solid var(--sky);
    border-radius:999px; text-decoration:none; color:var(--ink); font-weight:800; background:#fff;
  }
  .tab[aria-current="page"]{ border-color:#dbe4f2; color:var(--brand); }

  .filters{ display:flex; gap:10px; flex-wrap:wrap; padding:8px 0 14px; }
  .select{
    border:1px solid var(--sky); border-radius:999px; padding:8px 12px; background:#fff; color:var(--ink);
    font-weight:700;
  }

  .grid{ display:grid; grid-template-columns: repeat(3, 1fr); gap:16px; }
  @media (max-width:960px){ .grid{ grid-template-columns: 1fr; } }

  .dev-card{
    display:flex; flex-direction:column; border:1px solid var(--sky); border-radius:12px; overflow:hidden; background:#fff;
    text-decoration:none; color:inherit; transition:transform .15s ease, border-color .15s ease, box-shadow .15s ease;
  }
  .dev-card:hover{ transform:translateY(-2px); border-color:#dbe4f2; box-shadow:0 10px 24px rgba(0,0,0,.08); }
  .dev-img{ width:100%; height:auto; aspect-ratio:700/394; object-fit:cover; background:#f5f7fa; }
  .dev-body{ padding:12px 14px 14px; display:flex; flex-direction:column; gap:6px; }
  .dev-kicker{ font-size:.78rem; font-weight:700; letter-spacing:.5px; text-transform:uppercase; color:var(--muted); }
  .dev-title{ font-size:1.02rem; font-weight:900; color:var(--ink); line-height:1.28; }
  .dev-meta{ color:var(--muted); font-size:.95rem; }
  .dev-actions{ margin-top:8px; display:flex; gap:8px; flex-wrap:wrap; }
  .btn{
    display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border:1px solid var(--sky);
    border-radius:999px; color:var(--brand); text-decoration:none; font-weight:800; background:#fff;
  }
  .btn:hover{ border-color:#dbe4f2; }
  .btn svg{ width:16px; height:16px; }
</style>
</head>
<body>
<div id="site-header"></div>

<main class="container">
  <header class="hero">
    <h1 class="hero-title">Morning to Morning</h1>
    <p class="hero-sub">Walk through Scripture in one year with short readings and focused meditations.</p>
  </header>

  <nav class="tabs" aria-label="Devotional tabs">
    <a class="tab" href="/israelite-research/morning-to-morning.html" aria-current="page">All</a>
    <a class="tab" href="/israelite-research/morning-to-morning.html#life-of-christ" id="life-of-christ">Life of Christ</a>
  </nav>

  <div class="filters" role="region" aria-label="Filters">
    <select class="select" aria-label="Month">
      <option value="">Month: All</option>
      <option>January</option><option>February</option><option>March</option><option>April</option>
      <option>May</option><option>June</option><option>July</option><option>August</option>
      <option>September</option><option>October</option><option>November</option><option>December</option>
    </select>
    <select class="select" aria-label="Track">
      <option value="">Track: All</option>
      <option>Life of Christ</option>
      <option>Pentateuch</option>
      <option>Psalms & Wisdom</option>
      <option>Prophets</option>
      <option>Gospels & Acts</option>
      <option>Epistles & Revelation</option>
    </select>
  </div>

  <section class="grid" aria-label="Devotionals">
    <!-- Example cards (clone/extend to build out the plan) -->
    <a class="dev-card" href="#">
      <img class="dev-img" alt="Day 1" src="/israelite-research/images/devotionals/day1-700x394.jpg"/>
      <div class="dev-body">
        <div class="dev-kicker">Day 1 • Genesis</div>
        <div class="dev-title">In the Beginning: Order and Goodness</div>
        <div class="dev-meta">Gen 1–2</div>
        <div class="dev-actions">
          <a class="btn" href="/israelite-research/events.html">Add to Events</a>
          <a class="btn" href="#">Read</a>
        </div>
      </div>
    </a>

    <a class="dev-card" href="#">
      <img class="dev-img" alt="Day 2" src="/israelite-research/images/devotionals/day2-700x394.jpg"/>
      <div class="dev-body">
        <div class="dev-kicker">Day 2 • Genesis</div>
        <div class="dev-title">Work, Word, and Boundaries</div>
        <div class="dev-meta">Gen 3–4</div>
        <div class="dev-actions">
          <a class="btn" href="/israelite-research/events.html">Add to Events</a>
          <a class="btn" href="#">Read</a>
        </div>
      </div>
    </a>

    <a class="dev-card" href="#">
      <img class="dev-img" alt="Day 3" src="/israelite-research/images/devotionals/day3-700x394.jpg"/>
      <div class="dev-body">
        <div class="dev-kicker">Day 3 • Gospels</div>
        <div class="dev-title">The Word Made Flesh</div>
        <div class="dev-meta">Jn 1</div>
        <div class="dev-actions">
          <a class="btn" href="/israelite-research/events.html">Add to Events</a>
          <a class="btn" href="#">Read</a>
        </div>
      </div>
    </a>
  </section>
</main>

<div id="site-footer"></div>

<script>
(function(){
  const DEVO_URL = '/israelite-research/data/devotionals.json';

  // Hook targets (be tolerant if IDs differ)
  const grid = document.querySelector('#devoGrid') || document.querySelector('.grid-3');
  const monthSel = document.getElementById('monthFilter');
  const trackSel = document.getElementById('trackFilter');

  let ALL = []; // normalized 1..365

  function normalize(data){
    const map = new Map();
    (data.devotionals||[]).forEach(d => map.set(Number(d.day), d));
    const arr = [];
    for (let i=1;i<=365;i++){
      if (map.has(i)) { arr.push(map.get(i)); }
      else {
        arr.push({
          day:i, kicker:`Day ${i} · Coming Soon`,
          title:'Coming Soon', refs:[], track:'All', image:''
        });
      }
    }
    return arr;
  }

  function cardHTML(d){
    const refs = (d.refs||[]).join(' • ') || '—';
    const img = d.image ? `<img src="${d.image}" alt="" loading="lazy" style="width:100%;height:140px;object-fit:cover;border-radius:10px;border:1px solid #e7ecf4"/>` : '';
    return `
      <a class="card" href="#" aria-label="Day ${d.day}">
        <div class="card-body">
          ${img}
          <div class="meta" style="margin-top:8px;color:#6b7280;font-weight:700">${d.kicker}</div>
          <h3 class="card-title" style="margin:.3rem 0 0;font-size:1.05rem;font-weight:900">${d.title}</h3>
          <div class="meta" style="margin-top:6px">${refs}</div>
          <div class="card-cta" style="padding:10px 0 0;display:flex;gap:8px;flex-wrap:wrap">
            <span class="btn">Read</span><span class="btn">Share</span>
          </div>
        </div>
      </a>
    `;
  }

  function monthOf(day){
    // Lightweight mapping: 31,28,31,30,31,30,31,31,30,31,30,31
    const lens=[31,28,31,30,31,30,31,31,30,31,30,31];
    let d=day, m=0;
    while(m<12){
      if(d<=lens[m]) return m+1;
      d-=lens[m]; m++;
    }
    return 12;
  }

  function applyFilters(){
    const m = monthSel && monthSel.value ? Number(monthSel.value) : 0;
    const t = trackSel && trackSel.value ? String(trackSel.value) : '';
    const filtered = ALL.filter(d => {
      const byMonth = m ? (monthOf(d.day)===m) : true;
      const byTrack = t ? ((d.track||'').toLowerCase()===t.toLowerCase()) : true;
      return byMonth && byTrack;
    });
    render(filtered);
  }

  function render(list){
    if(!grid) return;
    grid.innerHTML = list.map(cardHTML).join('');
  }

  async function boot(){
    try{
      const r = await fetch(DEVO_URL, {cache:'no-store'});
      const j = await r.json();
      ALL = normalize(j);
      render(ALL);
      if(monthSel) monthSel.addEventListener('change', applyFilters);
      if(trackSel) trackSel.addEventListener('change', applyFilters);
    }catch(e){
      console.error('Devotionals failed to load', e);
      if(grid) grid.innerHTML = `<div class="muted">Devotionals file not found yet.</div>`;
    }
  }

  boot();
})();
</script>


<script src="/israelite-research/js/include.js"></script>
</body>
</html>
